# 03 - Design System

[< Retour Ã  l'index](./00-index.md) | [< Architecture](./02-architecture.md)

---

## PersonnalitÃ© de Scapin

### Origine et Inspiration

Scapin vient des **Fourberies de Scapin** de MoliÃ¨re (1671) et de la **Commedia dell'Arte** italienne. C'est un valet rusÃ©, dÃ©brouillard, qui utilise son intelligence pour rÃ©soudre les problÃ¨mes de son maÃ®tre.

**RÃ©pliques emblÃ©matiques de MoliÃ¨re qui inspirent notre Scapin :**

| RÃ©plique originale | Ce que Ã§a inspire |
|--------------------|-------------------|
| *"Que diable allait-il faire dans cette galÃ¨re ?"* | Scapin dramatise parfois pour marquer les esprits |
| *"Ã€ vous dire la vÃ©ritÃ©, il y a peu de choses qui me soient impossibles"* | Confiance assumÃ©e, presque fanfaron |
| *"Je suis naturellement honnÃªte, mais le temps me presse"* | Pragmatique, s'adapte aux circonstances |

**Traits Commedia dell'Arte :**

| Trait du zanni | Application dans l'app |
|----------------|------------------------|
| **Agile** | RÃ©ponses rapides, jamais de latence pesante |
| **Improvisateur** | Suggestions contextuelles, s'adapte |
| **Complice du public** | Brise le 4Ã¨me mur, parle de lui-mÃªme |
| **Toujours un plan** | Propose toujours une solution |
| **Battu mais jamais vaincu** | Admet ses erreurs avec humour, rebondit |

### Traits de CaractÃ¨re

| Trait | HÃ©ritage | Exemple UI |
|-------|----------|------------|
| **RusÃ©** | MoliÃ¨re : stratagÃ¨mes ingÃ©nieux | "J'ai trouvÃ© une astuce : archiver en masse les newsletters." |
| **ThÃ©Ã¢tral** | Commedia : expressif | "Que diable faisait ce meeting de 2h dans ton agenda ?" |
| **Confiant** | *"Peu de choses impossibles"* | "Laisse-moi gÃ©rer, je m'en occupe." |
| **Loyal** | Serviteur dÃ©vouÃ© | "Je veille sur ta boÃ®te mail pendant que tu te concentres." |
| **EspiÃ¨gle** | Zanni farceur | "Psst... Ce mail de 47 lignes dit juste 'OK'." |
| **RÃ©silient** | *"Battu mais rebondit"* | "Oups, ratÃ©. Mais j'ai un plan B !" |
| **Direct** | EfficacitÃ© du valet | "3 urgents. On y va ?" |
| **Humble** | Sait ses limites | "LÃ , je sÃ¨che. C'est toi le chef." |

### Guide de Ton par Contexte

| Contexte | Ton | Exemple |
|----------|-----|---------|
| **Briefing matin** | Ã‰nergique, thÃ©Ã¢tral | "Bonjour maÃ®tre ! Au programme : 2 batailles (rÃ©unions), 8 missives (emails)." |
| **SuccÃ¨s** | Fanfaron gentil | "Et voilÃ  le travail ! Rien ne rÃ©siste Ã  Scapin." |
| **Grosse rÃ©ussite** | Dramatique | "Inbox Ã  zÃ©ro ! *s'incline* Merci, merci." |
| **Erreur systÃ¨me** | DÃ©dramatise | "AÃ¯e, Teams fait des siennes. Je retente dans 5 min, promis." |
| **Attente action** | Direct, complice | "3 urgents t'attendent. On s'y met ensemble ?" |
| **Conseil proactif** | EspiÃ¨gle | "Petit conseil d'ami : ce meeting pourrait Ãªtre un email..." |
| **Confiance faible** | Humble, honnÃªte | "Sur ce coup, je ne suis pas sÃ»r Ã  100%. Ton avis ?" |
| **Situation dÃ©licate** | StratÃ¨ge | "Attention, email piÃ©geux. Je te propose 3 approches..." |
| **Fin de journÃ©e** | Chaleureux | "Belle journÃ©e ! 47 Ã©vÃ©nements domptÃ©s. Repose-toi, demain on remet Ã§a." |
| **Longue absence** | Accueillant | "Te revoilÃ  ! J'ai gardÃ© le fort. Voici le rÃ©sumÃ©." |

### Messages d'Ã‰tat (avec personnalitÃ©)

| Ã‰tat | Message | Alternative |
|------|---------|-------------|
| Chargement | "Je rÃ©flÃ©chis..." | "Laisse-moi cogiter..." |
| Synchro | "Je synchronise..." | "Je fais le point avec Teams..." |
| SuccÃ¨s | "C'est fait !" | "RÃ©glÃ© comme du papier Ã  musique !" |
| Erreur | "AÃ¯e, petit pÃ©pin." | "Oups, couac technique." |
| Vide | "Rien Ã  signaler, profite !" | "RAS ! Tu peux souffler." |
| Offline | "Connexion perdue..." | "Je ne capte plus, patience..." |

### Expressions Signature

Quelques tournures rÃ©currentes qui donnent sa voix Ã  Scapin :

| Expression | Quand l'utiliser |
|------------|------------------|
| "Laisse-moi gÃ©rer" | Prise en charge autonome |
| "On s'y met ?" | Invitation Ã  l'action |
| "Que diable..." | Situation absurde ou surprise |
| "J'ai un plan" | Proposition de solution |
| "Entre nous..." | Conseil confidentiel |
| "Promis" | Engagement |
| "Pas de panique" | Situation de stress |
| "MaÃ®tre" | (occasionnel, clin d'Å“il MoliÃ¨re) |

### Ce que Scapin NE fait PAS

| Interdit | Pourquoi |
|----------|----------|
| âŒ Culpabiliser | "Tu aurais dÃ»..." â€” jamais |
| âŒ ÃŠtre servile | "Oui maÃ®tre, tout de suite maÃ®tre" â€” non |
| âŒ ÃŠtre condescendant | "C'est simple, tu fais juste..." â€” non |
| âŒ ÃŠtre robotique | "OpÃ©ration terminÃ©e." â€” trop froid |
| âŒ ÃŠtre lourd | Blagues forcÃ©es, trop d'emojis |
| âŒ Mentir | Toujours honnÃªte sur ses limites |

### Principes RÃ©dactionnels

1. **Tutoiement** â€” Scapin tutoie Johan (relation de confiance maÃ®tre-valet)
2. **Phrases courtes** â€” Max 10-15 mots par message (efficacitÃ© du valet)
3. **Verbes d'action** â€” "Archive", "RÃ©ponds", "Ignore" (pas de blabla)
4. **Touches thÃ©Ã¢trales** â€” Occasionnellement, pas systÃ©matique
5. **Humour dosÃ©** â€” EspiÃ¨gle mais jamais au dÃ©triment de l'efficacitÃ©
6. **Emoji avec parcimonie** â€” Seulement pour accentuer (succÃ¨s, erreur)
7. **RÃ©fÃ©rence Ã  lui-mÃªme** â€” Peut parler de "Scapin" Ã  la 3Ã¨me personne (rare)

---

## Principes UI Dense

L'interface privilÃ©gie la **densitÃ© d'information** pour maximiser la productivitÃ©.

### RÃ¨gles de DensitÃ©

| Ã‰lÃ©ment | Approche Dense | Ã‰viter |
|---------|----------------|--------|
| **Padding cards** | 12-16px | 24-32px |
| **Gap entre Ã©lÃ©ments** | 8-12px | 16-24px |
| **Line height** | 1.25-1.4 | 1.6-1.75 |
| **Texte secondaire** | 12-13px | 14-16px |
| **Badges** | Compacts, icÃ´ne + texte court | Larges, texte long |

### Exemples ComparÃ©s

```
âŒ AÃ‰RÃ‰ (Ã©viter)                    âœ… DENSE (prÃ©fÃ©rÃ©)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        â”‚         â”‚ ğŸ“§ Email de Marie    â”‚
â”‚  ğŸ“§ Email de Marie     â”‚         â”‚ Budget Q2 â€” Urgent   â”‚
â”‚                        â”‚         â”‚ Archiver âœ“  Modifier â”‚
â”‚  Sujet: Budget Q2      â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚         â”‚ ğŸ’¬ Teams @Pierre     â”‚
â”‚  Urgence: Haute        â”‚         â”‚ Question projet X    â”‚
â”‚                        â”‚         â”‚ RÃ©pondre  Ignorer    â”‚
â”‚  [Archiver] [Modifier] â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Espacements Dense

```css
/* Dense spacing scale */
--space-dense-1: 0.25rem;   /* 4px - micro gaps */
--space-dense-2: 0.5rem;    /* 8px - intra-component */
--space-dense-3: 0.75rem;   /* 12px - card padding */
--space-dense-4: 1rem;      /* 16px - section gaps */
--space-dense-6: 1.5rem;    /* 24px - major sections */
```

---

## SystÃ¨me de Notifications

### Types de Notifications

| Type | Canal | Quand |
|------|-------|-------|
| **Desktop native** | `Notification API` | Ã‰vÃ©nement urgent, action requise |
| **Badge onglet** | `document.title` | Compteur non-lus |
| **Toast in-app** | Composant UI | Confirmation actions |
| **Badge sidebar** | Compteur rouge | Items Ã  traiter |

### Configuration Utilisateur

```typescript
interface NotificationSettings {
  desktop_enabled: boolean;      // Notifications desktop natives
  desktop_urgent_only: boolean;  // Seulement urgents
  sound_enabled: boolean;        // Son de notification
  badge_enabled: boolean;        // Badge dans l'onglet
  quiet_hours: {                 // Ne pas dÃ©ranger
    enabled: boolean;
    start: string;  // "22:00"
    end: string;    // "08:00"
  };
}
```

### ImplÃ©mentation Badge Onglet

```typescript
function updateTabBadge(count: number) {
  const base = 'Scapin';
  document.title = count > 0 ? `(${count}) ${base}` : base;
}
```

### Notification Desktop

```typescript
async function notifyDesktop(title: string, body: string, urgent: boolean) {
  if (!settings.desktop_enabled) return;
  if (!urgent && settings.desktop_urgent_only) return;
  if (isQuietHours()) return;

  if (Notification.permission === 'granted') {
    new Notification(title, {
      body,
      icon: '/icons/scapin-192.png',
      tag: 'scapin-notification',
      requireInteraction: urgent
    });
  }
}
```

---

## Design Mobile-First â€” MVP

L'usage mobile est **rÃ©gulier**, donc le design mobile est prioritaire (MVP).

### Principes Mobile

| Principe | SpÃ©cification |
|----------|---------------|
| **Touch targets** | Minimum 44x44px |
| **Thumb zone** | Actions importantes en bas |
| **Navigation** | Bottom bar sur mobile |
| **Gestes** | Swipe pour actions rapides |
| **Texte lisible** | Minimum 16px pour inputs |

### Bottom Navigation (Mobile)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚          Contenu principal          â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ      ğŸ“¥     ğŸ“     ğŸ’¬     âš™ï¸   â”‚
â”‚ Accueil  Flux  Notes  Chat  Plus   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gestes Swipe

| Geste | Action | Contexte |
|-------|--------|----------|
| Swipe gauche | Rejeter / Archiver | Event card |
| Swipe droite | Approuver | Event card |
| Pull down | RafraÃ®chir | Listes |
| Long press | Menu contextuel | Cards |

### Breakpoints RÃ©visÃ©s (Mobile-First)

```css
/* Mobile-first approach */
/* Base: Mobile (< 640px) */

@media (min-width: 640px) {  /* sm: Tablet portrait */
  /* 2 colonnes, sidebar icons */
}

@media (min-width: 1024px) { /* lg: Desktop */
  /* 3 colonnes, sidebar full, chat panel */
}
```

### Adaptations par Breakpoint

| Ã‰lÃ©ment | Mobile | Tablet | Desktop |
|---------|--------|--------|---------|
| **Navigation** | Bottom bar | Sidebar icons | Sidebar full |
| **Chat** | Page dÃ©diÃ©e | FAB + overlay | Panel latÃ©ral |
| **Event detail** | Full screen | Slide-over | Side panel |
| **Actions** | Swipe gestures | Boutons | Boutons + raccourcis |

### PWA Configuration

```json
// manifest.json
{
  "name": "Scapin",
  "short_name": "Scapin",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#3b82f6",
  "background_color": "#ffffff",
  "icons": [
    { "src": "/icons/scapin-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icons/scapin-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}
```

---

## Palette de Couleurs

### Couleurs de Base

```css
/* ===== LIGHT MODE ===== */
:root {
  /* Backgrounds */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --bg-tertiary: #f1f5f9;
  --bg-hover: #e2e8f0;

  /* Text */
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --text-muted: #94a3b8;
  --text-inverse: #ffffff;

  /* Accent */
  --accent: #3b82f6;           /* Blue-500 */
  --accent-hover: #2563eb;     /* Blue-600 */
  --accent-light: #dbeafe;     /* Blue-100 */

  /* Semantic */
  --success: #22c55e;          /* Green-500 */
  --success-light: #dcfce7;    /* Green-100 */
  --warning: #f59e0b;          /* Amber-500 */
  --warning-light: #fef3c7;    /* Amber-100 */
  --error: #ef4444;            /* Red-500 */
  --error-light: #fee2e2;      /* Red-100 */

  /* Borders */
  --border: #e2e8f0;
  --border-focus: #3b82f6;
}

/* ===== DARK MODE ===== */
:root.dark {
  /* Backgrounds */
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --bg-tertiary: #334155;
  --bg-hover: #475569;

  /* Text */
  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --text-muted: #64748b;
  --text-inverse: #0f172a;

  /* Accent */
  --accent: #60a5fa;           /* Blue-400 */
  --accent-hover: #3b82f6;     /* Blue-500 */
  --accent-light: #1e3a5f;     /* Blue-900/50 */

  /* Semantic */
  --success: #4ade80;          /* Green-400 */
  --success-light: #14532d;    /* Green-900/50 */
  --warning: #fbbf24;          /* Amber-400 */
  --warning-light: #78350f;    /* Amber-900/50 */
  --error: #f87171;            /* Red-400 */
  --error-light: #7f1d1d;      /* Red-900/50 */

  /* Borders */
  --border: #334155;
  --border-focus: #60a5fa;
}
```

### Couleurs par Source

| Source | Couleur | Light | Dark | Usage |
|--------|---------|-------|------|-------|
| **Email** | Bleu | `#3b82f6` | `#60a5fa` | Badge, icÃ´ne envelope |
| **Teams** | Violet | `#7c3aed` | `#a78bfa` | Badge, icÃ´ne chat |
| **Calendar** | Vert | `#10b981` | `#34d399` | Badge, icÃ´ne calendar |
| **OmniFocus** | Orange | `#f97316` | `#fb923c` | Badge, icÃ´ne check |

```css
/* Sources */
--source-email: #3b82f6;
--source-teams: #7c3aed;
--source-calendar: #10b981;
--source-omnifocus: #f97316;
```

### Couleurs par Urgence

| Urgence | Couleur | Light | Dark | Usage |
|---------|---------|-------|------|-------|
| **High** | Rouge | `#ef4444` | `#f87171` | Badge rouge, border left |
| **Medium** | Orange | `#f97316` | `#fb923c` | Badge orange |
| **Low** | Gris | `#6b7280` | `#9ca3af` | Badge gris discret |

```css
/* Urgency */
--urgency-high: #ef4444;
--urgency-medium: #f97316;
--urgency-low: #6b7280;
```

### Couleurs par Confiance

| Niveau | Plage | Couleur | Signification |
|--------|-------|---------|---------------|
| **Faible** | 0-50% | Rouge â†’ Orange | Scapin incertain, action requise |
| **Moyenne** | 50-80% | Orange â†’ Jaune | Confiance modÃ©rÃ©e |
| **Haute** | 80-100% | Jaune â†’ Vert | Scapin confiant |

```css
/* Confidence gradient stops */
--confidence-0: #ef4444;    /* Red */
--confidence-50: #f97316;   /* Orange */
--confidence-70: #eab308;   /* Yellow */
--confidence-85: #84cc16;   /* Lime */
--confidence-100: #22c55e;  /* Green */
```

---

## Typographie

```css
/* Fonts */
--font-sans: 'Inter', system-ui, -apple-system, sans-serif;
--font-mono: 'JetBrains Mono', 'Fira Code', monospace;

/* Font Sizes */
--text-xs: 0.75rem;      /* 12px - Labels, badges */
--text-sm: 0.875rem;     /* 14px - Secondary text, metadata */
--text-base: 1rem;       /* 16px - Body text */
--text-lg: 1.125rem;     /* 18px - Emphasized text */
--text-xl: 1.25rem;      /* 20px - Section headers */
--text-2xl: 1.5rem;      /* 24px - Page titles */
--text-3xl: 1.875rem;    /* 30px - Hero text */

/* Font Weights */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;

/* Line Heights */
--leading-tight: 1.25;
--leading-normal: 1.5;
--leading-relaxed: 1.75;
```

### HiÃ©rarchie Typographique

| Ã‰lÃ©ment | Taille | Poids | Couleur |
|---------|--------|-------|---------|
| **Page Title** | text-2xl | semibold | text-primary |
| **Section Header** | text-xl | semibold | text-primary |
| **Card Title** | text-lg | medium | text-primary |
| **Body** | text-base | normal | text-primary |
| **Secondary** | text-sm | normal | text-secondary |
| **Caption/Label** | text-xs | medium | text-muted |
| **Code** | text-sm | normal (mono) | text-primary |

---

## Ã‰lÃ©vation (Shadows)

```css
/* Shadow Scale */
--shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

/* Usage */
Card:          shadow-sm
Card (hover):  shadow-md
Dropdown:      shadow-lg
Modal:         shadow-xl
```

---

## Border Radius

```css
/* Radius Scale */
--radius-sm: 0.25rem;    /* 4px - Badges, small buttons */
--radius-md: 0.375rem;   /* 6px - Inputs, default buttons */
--radius-lg: 0.5rem;     /* 8px - Cards, containers */
--radius-xl: 0.75rem;    /* 12px - Modals, large cards */
--radius-2xl: 1rem;      /* 16px - Hero sections */
--radius-full: 9999px;   /* Pills, avatars */
```

---

## Z-Index Scale

```css
/* Z-Index Layers */
--z-base: 0;
--z-dropdown: 10;
--z-sticky: 20;
--z-fixed: 30;
--z-modal-backdrop: 40;
--z-modal: 50;
--z-popover: 60;
--z-tooltip: 70;
--z-toast: 80;
--z-max: 9999;

/* Usage */
Sidebar:           z-sticky (20)
Header:            z-fixed (30)
Dropdown menu:     z-dropdown (10)
Modal backdrop:    z-modal-backdrop (40)
Modal:             z-modal (50)
Command palette:   z-modal (50)
Tooltip:           z-tooltip (70)
Toast:             z-toast (80)
```

---

## Espacements

```css
/* Spacing Scale (Tailwind default) */
--space-0: 0;
--space-1: 0.25rem;   /* 4px */
--space-2: 0.5rem;    /* 8px */
--space-3: 0.75rem;   /* 12px */
--space-4: 1rem;      /* 16px */
--space-5: 1.25rem;   /* 20px */
--space-6: 1.5rem;    /* 24px */
--space-8: 2rem;      /* 32px */
--space-10: 2.5rem;   /* 40px */
--space-12: 3rem;     /* 48px */
--space-16: 4rem;     /* 64px */

/* Common patterns */
Card padding:      space-6 (24px)
Section gap:       space-8 (32px)
Form gap:          space-4 (16px)
Button padding:    space-3 horizontal, space-2 vertical
```

---

## IcÃ´nes

**BibliothÃ¨que** : [Lucide](https://lucide.dev/) (fork maintenu de Feather Icons)

### Installation

```bash
npm install lucide-svelte
```

### Usage

```svelte
<script>
  import { Mail, MessageSquare, Calendar, CheckSquare } from 'lucide-svelte';
</script>

<Mail class="w-5 h-5" />
```

### IcÃ´nes Principales

| Usage | IcÃ´ne Lucide | Taille |
|-------|--------------|--------|
| **Navigation** | Home, Inbox, FileText, MessageCircle, BarChart3, Settings | 20px |
| **Sources** | Mail, MessageSquare, Calendar, CheckSquare | 16px |
| **Actions** | Check, X, Edit, Trash2, RotateCcw, Send | 16px |
| **Status** | Circle, AlertCircle, CheckCircle, XCircle | 16px |
| **UI** | ChevronDown, ChevronRight, Search, Plus, MoreHorizontal | 16px |

---

## Composants UI

### Button

| Variante | Background | Text | Border | Usage |
|----------|------------|------|--------|-------|
| **Primary** | accent | white | none | Actions principales |
| **Secondary** | transparent | accent | accent | Actions secondaires |
| **Ghost** | transparent | text-secondary | none | Actions tertiaires |
| **Danger** | error | white | none | Actions destructrices |

```svelte
<!-- Primary -->
<button class="bg-accent text-white hover:bg-accent-hover px-4 py-2 rounded-md font-medium">
  Approuver
</button>

<!-- Secondary -->
<button class="border border-accent text-accent hover:bg-accent-light px-4 py-2 rounded-md font-medium">
  Modifier
</button>

<!-- Ghost -->
<button class="text-text-secondary hover:bg-bg-hover px-4 py-2 rounded-md">
  Annuler
</button>

<!-- Danger -->
<button class="bg-error text-white hover:bg-red-600 px-4 py-2 rounded-md font-medium">
  Supprimer
</button>
```

### Card

```svelte
<div class="bg-bg-primary border border-border rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow">
  <!-- Content -->
</div>
```

### Badge

```svelte
<!-- Source Badge -->
<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-source-email/10 text-source-email">
  <Mail class="w-3 h-3" />
  Email
</span>

<!-- Urgency Badge -->
<span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-urgency-high/10 text-urgency-high">
  Urgent
</span>
```

### Input

```svelte
<input
  type="text"
  class="w-full px-3 py-2 bg-bg-primary border border-border rounded-md
         text-text-primary placeholder:text-text-muted
         focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent
         transition-colors"
  placeholder="Rechercher..."
/>
```

---

## Ã‰tats d'AccessibilitÃ©

### Focus States

Tous les Ã©lÃ©ments interactifs doivent avoir un focus visible :

```css
/* Focus ring standard */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2;
}

/* Focus ring pour dark mode */
.dark .focus-ring {
  @apply focus:ring-offset-bg-primary;
}
```

### Contraste

| Ã‰lÃ©ment | Ratio minimum | Standard |
|---------|---------------|----------|
| Texte normal | 4.5:1 | WCAG AA |
| Texte large (18px+) | 3:1 | WCAG AA |
| Ã‰lÃ©ments UI | 3:1 | WCAG AA |

---

## Animations

```css
/* Transition defaults */
--transition-fast: 150ms ease-in-out;
--transition-normal: 200ms ease-in-out;
--transition-slow: 300ms ease-in-out;

/* Common transitions */
.transition-colors { transition: color, background-color, border-color var(--transition-fast); }
.transition-shadow { transition: box-shadow var(--transition-fast); }
.transition-transform { transition: transform var(--transition-normal); }
```

### Animations ClÃ©s

| Animation | DurÃ©e | Usage |
|-----------|-------|-------|
| **Fade** | 200ms | Modals, dropdowns |
| **Scale** | 200ms | Modals (0.95 â†’ 1) |
| **Slide** | 300ms | Toasts, panels |
| **Pulse** | 2s loop | Loading, status "raisonnement" |
| **Spin** | 1s loop | Loading spinner |

```css
/* Pulse pour status "raisonnement" */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
```

---

## Composants SpÃ©cifiques Scapin

### ConfidenceBar

Barre de confiance 0-100% avec dÃ©gradÃ© de couleurs :

```svelte
<script>
  export let confidence: number; // 0-100

  function getColor(value: number): string {
    if (value < 50) return 'bg-red-500';
    if (value < 70) return 'bg-orange-500';
    if (value < 85) return 'bg-yellow-500';
    return 'bg-green-500';
  }
</script>

<div class="w-full h-2 bg-bg-tertiary rounded-full overflow-hidden">
  <div
    class="{getColor(confidence)} h-full rounded-full transition-all"
    style="width: {confidence}%"
  />
</div>
<span class="text-xs text-text-muted">{confidence}%</span>
```

### SourceBadge

```svelte
<script>
  import { Mail, MessageSquare, Calendar, CheckSquare } from 'lucide-svelte';

  export let source: 'email' | 'teams' | 'calendar' | 'omnifocus';

  const config = {
    email: { icon: Mail, label: 'Email', class: 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400' },
    teams: { icon: MessageSquare, label: 'Teams', class: 'bg-violet-100 text-violet-600 dark:bg-violet-900/30 dark:text-violet-400' },
    calendar: { icon: Calendar, label: 'Calendar', class: 'bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400' },
    omnifocus: { icon: CheckSquare, label: 'OmniFocus', class: 'bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400' },
  };

  $: cfg = config[source];
</script>

<span class="inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium {cfg.class}">
  <svelte:component this={cfg.icon} class="w-3 h-3" />
  {cfg.label}
</span>
```

### StatusIndicator

Status temps rÃ©el de Scapin dans le header :

```svelte
<script>
  export let status: 'active' | 'reasoning' | 'focus' | 'error' | 'paused';
  export let focusMinutes?: number;

  const config = {
    active: { color: 'bg-green-500', label: 'Actif', pulse: false },
    reasoning: { color: 'bg-blue-500', label: 'Raisonnement...', pulse: true },
    focus: { color: 'bg-amber-500', label: `Focus ${focusMinutes}min`, pulse: false },
    error: { color: 'bg-red-500', label: 'Erreur sync', pulse: false },
    paused: { color: 'bg-gray-400', label: 'En pause', pulse: false },
  };

  $: cfg = config[status];
</script>

<div class="flex items-center gap-2">
  <span class="relative flex h-3 w-3">
    {#if cfg.pulse}
      <span class="animate-ping absolute inline-flex h-full w-full rounded-full {cfg.color} opacity-75"></span>
    {/if}
    <span class="relative inline-flex rounded-full h-3 w-3 {cfg.color}"></span>
  </span>
  <span class="text-sm text-text-secondary">{cfg.label}</span>
</div>
```

---

## Configuration Tailwind

```javascript
// tailwind.config.js
export default {
  content: ['./src/**/*.{html,js,svelte,ts}'],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        // Sources
        'source-email': '#3b82f6',
        'source-teams': '#7c3aed',
        'source-calendar': '#10b981',
        'source-omnifocus': '#f97316',

        // Urgency
        'urgency-high': '#ef4444',
        'urgency-medium': '#f97316',
        'urgency-low': '#6b7280',
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
      },
      animation: {
        'pulse-slow': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
      },
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
  ],
};
```

---

## Responsive Breakpoints

```css
/* Mobile first (Tailwind defaults) */
sm: 640px    /* Phones landscape */
md: 768px    /* Tablets */
lg: 1024px   /* Laptops */
xl: 1280px   /* Desktops */
2xl: 1536px  /* Large screens */
```

| Breakpoint | Sidebar | Chat Panel | Layout |
|------------|---------|------------|--------|
| < md | Hidden (hamburger) | Hidden (FAB) | 1 column |
| md - lg | Collapsed (icons) | Overlay | 2 columns |
| lg - xl | Full | Collapsed | 2 columns |
| â‰¥ xl | Full | Full | 3 columns |

---

[< Architecture](./02-architecture.md) | [Suivant : Mockups Core >](./04-mockups-core.md)
